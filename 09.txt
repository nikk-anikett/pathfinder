<!DOCTYPE html>
<html>
<head>
  <title>Fetch Data</title>
</head>
<body>
  <h1>Data Viewer</h1>
  <button onclick="fetchData('database1')">Fetch Data from Database 1</button>
  <button onclick="fetchData('database2')">Fetch Data from Database 2</button>
  
  <table>
    <thead>
      <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Email</th>
      </tr>
    </thead>
    <tbody id="data">
      <!-- Data will be displayed here dynamically -->
    </tbody>
  </table>

  <script>
    function fetchData(database) {
      const dataContainer = document.getElementById('data');
      dataContainer.innerHTML = ''; // Clear previous data

      fetch(`/${database}`)
        .then(response => response.json())
        .then(data => {
          data.forEach(user => {
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${user.FirstName}</td>
              <td>${user.LastName}</td>
              <td>${user.Email}</td>
            `;
            dataContainer.appendChild(row);
          });
        })
        .catch(error => console.error('Error fetching data:', error));
    }

    // Fetch data initially and refresh every 5 seconds
    fetchData('database1');
    setInterval(() => {
      fetchData('database1');
    }, 5000); // 5000 milliseconds = 5 seconds
  </script>
</body>
</html>




<!DOCTYPE html>
<html>
<head>
  <title>Received Data</title>
</head>
<body>
  <h1>Received Data:</h1>
  <table border="1" id="dataTable">
    <thead>
      <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Email</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
  <script>
    function updateTable(data) {
      const tableBody = document.querySelector('#dataTable tbody');
      tableBody.innerHTML = '';

      data.forEach(row => {
        const newRow = tableBody.insertRow();
        newRow.insertCell().innerText = row.FirstName;
        newRow.insertCell().innerText = row.LastName;
        newRow.insertCell().innerText = row.Email;
      });
    }

    function fetchData() {
      fetch('/data')
        .then(response => response.json())
        .then(data => {
          updateTable(data);
        })
        .catch(error => {
          console.error('Error fetching data:', error);
        });
    }

    // Fetch data initially and refresh every 5 seconds
    fetchData();
    setInterval(fetchData, 5000);
  </script>
</body>
</html>



const express = require('express');
const dgram = require('dgram');
const http = require('http');
const WebSocket = require('ws');

const app = express();
const server = http.createServer(app);
const wss = new WebSocket.Server({ server });

let receivedData = [];

server.listen(3000, () => {
  console.log('Web server listening on port 3000');
});

const udpServer = dgram.createSocket('udp4');
udpServer.on('message', (msg, rinfo) => {
  const jsonData = msg.toString('utf8');
  const dataObj = JSON.parse(jsonData);
  receivedData.push(dataObj);

  // Send the received data to all connected WebSocket clients
  wss.clients.forEach(client => {
    if (client.readyState === WebSocket.OPEN) {
      client.send(JSON.stringify(receivedData));
    }
  });

  console.log('Received data:', receivedData);
});
udpServer.on('listening', () => {
  const address = udpServer.address();
  console.log(`UDP server listening on ${address.address}:${address.port}`);
});
udpServer.on('error', (err) => {
  console.error('UDP server error:', err);
  udpServer.close();
});
udpServer.bind(15000);

app.get('/', (req, res) => {
  res.sendFile(__dirname + '/index.html');
});

app.get('/data', (req, res) => {
  res.json(receivedData);
});

<!DOCTYPE html>
<html>
<head>
  <title>Fetch Data</title>
</head>
<body>
  <h1>Data Viewer</h1>
  <button onclick="fetchData('database1')">Fetch Data from Database 1</button>
  <button onclick="fetchData('database2')">Fetch Data from Database 2</button>
  
  <table>
    <thead>
      <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Email</th>
      </tr>
    </thead>
    <tbody id="data">
      <!-- Data will be displayed here dynamically -->
    </tbody>
  </table>

  <script>
    let currentDatabase = 'database1';

    function fetchData(database) {
      currentDatabase = database;
      const dataContainer = document.getElementById('data');
      dataContainer.innerHTML = ''; // Clear previous data

      fetch(`/${database}`)
        .then(response => response.json())
        .then(data => {
          data.forEach(user => {
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${user.FirstName}</td>
              <td>${user.LastName}</td>
              <td>${user.Email}</td>
            `;
            dataContainer.appendChild(row);
          });
        })
        .catch(error => console.error('Error fetching data:', error));
    }

    // Fetch data initially and refresh every 5 seconds
    fetchData(currentDatabase);
    setInterval(() => {
      fetchData(currentDatabase);
    }, 5000); // 5000 milliseconds = 5 seconds
  </script>
</body>
</html>
